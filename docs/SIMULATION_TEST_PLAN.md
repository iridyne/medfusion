# MedFusion 模拟项目测试计划

**测试日期**: 2026-02-21
**测试目标**: 验证 MedFusion 在真实项目场景下的可用性
**测试人员**: 开发者本人

---

## 🎯 测试目标

通过模拟一个真实的小客户项目，验证：

1. **功能可用性**: 当前 MedFusion 是否真的能用？
2. **使用体验**: 从数据到报告的流程是否顺畅？
3. **效率提升**: 是否比从头写代码更快？
4. **核心价值**: 哪些功能是必需的（20%），哪些是 over-engineering（80%）？

---

## 📋 模拟项目场景

### 项目背景

**客户**: 某医院影像科
**需求**: 使用胸部 X 光片 + 患者基本信息，预测是否患有肺炎
**数据规模**: 500-1000 张图片
**交付物**:
- 训练好的模型（.pt 文件）
- 性能报告（PDF/Word）
- 简单的推理脚本

**时间限制**: 2 周（实际工作时间约 3-5 天）

### 数据集选择

使用公开数据集：**Chest X-Ray Images (Pneumonia)**
- 来源: Kaggle
- 链接: https://www.kaggle.com/datasets/paultimothymooney/chest-xray-pneumonia
- 规模: ~5,800 张图片
- 类别: NORMAL vs PNEUMONIA

**为什么选这个数据集**:
- 真实的医学影像数据
- 二分类任务（最常见）
- 数据量适中
- 有明确的临床意义

---

## 🔬 测试流程

### 阶段 1: 数据准备（目标: < 30 分钟）

#### 任务清单
- [ ] 下载 Chest X-Ray 数据集
- [ ] 整理数据结构（图片 + CSV）
- [ ] 创建 CSV 文件（image_path, label, patient_id）
- [ ] 模拟添加表格数据（age, sex）

#### 记录内容
- 实际耗时: _____ 分钟
- 遇到的问题:
  - [ ] 数据格式不兼容
  - [ ] 路径处理复杂
  - [ ] 其他: _____
- MedFusion 是否有帮助: ⭐⭐⭐⭐⭐ (1-5 星)

---

### 阶段 2: 配置模型（目标: < 15 分钟）

#### 任务清单
- [ ] 复制 `configs/default.yaml` 为 `configs/pneumonia.yaml`
- [ ] 修改配置:
  - [ ] 数据路径
  - [ ] 模型架构（选择 backbone）
  - [ ] 训练超参数
  - [ ] 输出目录

#### 记录内容
- 实际耗时: _____ 分钟
- 配置是否清晰易懂: ⭐⭐⭐⭐⭐
- 遇到的困惑:
  - [ ] 不知道选哪个 backbone
  - [ ] 参数太多，不知道改什么
  - [ ] 配置文件结构复杂
  - [ ] 其他: _____

---

### 阶段 3: 训练模型（目标: 1 行命令启动）

#### 任务清单
- [ ] 运行训练命令
- [ ] 观察训练过程
- [ ] 检查是否有错误

#### 测试命令
```bash
# 方式 1: 使用 CLI（如果有）
uv run medfusion train --config configs/pneumonia.yaml

# 方式 2: 使用 Python 脚本
uv run python examples/train_demo.py --config configs/pneumonia.yaml

# 方式 3: 修改 train_demo.py 直接运行
uv run python examples/train_demo.py
```

#### 记录内容
- 实际使用的方式: _____
- 是否一次成功启动: [ ] 是 [ ] 否
- 如果失败，错误信息: _____
- 修复错误耗时: _____ 分钟
- 训练过程是否稳定: [ ] 是 [ ] 否
- 日志是否清晰: ⭐⭐⭐⭐⭐

---

### 阶段 4: 评估和报告（目标: 自动生成）

#### 任务清单
- [ ] 训练完成后自动生成报告
- [ ] 或手动运行评估命令
- [ ] 检查报告内容是否完整
- [ ] 检查报告格式是否专业

#### 测试命令
```bash
# 如果有 CLI
uv run medfusion evaluate --checkpoint outputs/best.pt --config configs/pneumonia.yaml

# 或查看训练输出目录
ls outputs/
```

#### 记录内容
- 报告是否自动生成: [ ] 是 [ ] 否
- 报告包含的内容:
  - [ ] 训练曲线
  - [ ] 混淆矩阵
  - [ ] ROC/PR 曲线
  - [ ] 性能指标表格
  - [ ] 其他: _____
- 报告格式: [ ] PDF [ ] Word [ ] Markdown [ ] 其他: _____
- 报告是否可以直接给客户: [ ] 是 [ ] 否
- 如果不能，缺少什么: _____

---

### 阶段 5: 调参实验（目标: < 10 分钟/次）

#### 任务清单
- [ ] 修改配置文件（换 backbone）
- [ ] 重新训练
- [ ] 对比结果

#### 测试场景
1. **实验 1**: ResNet18 → ResNet50
2. **实验 2**: 调整学习率
3. **实验 3**: 修改 fusion 策略

#### 记录内容
- 修改配置是否方便: ⭐⭐⭐⭐⭐
- 实验对比是否方便: ⭐⭐⭐⭐⭐
- 是否需要 Web UI: [ ] 需要 [ ] 不需要
- 原因: _____

---

## 📊 评估标准

### 时间效率

| 阶段 | 目标时间 | 实际时间 | 达标 |
|------|---------|---------|------|
| 数据准备 | < 30 分钟 | _____ | [ ] |
| 配置模型 | < 15 分钟 | _____ | [ ] |
| 启动训练 | < 5 分钟 | _____ | [ ] |
| 生成报告 | 自动 | _____ | [ ] |
| 调参实验 | < 10 分钟 | _____ | [ ] |
| **总计** | **< 1 小时** | **_____** | **[ ]** |

### 功能可用性

| 功能 | 是否可用 | 是否好用 | 是否必需 |
|------|---------|---------|---------|
| 数据加载 | [ ] | ⭐⭐⭐⭐⭐ | [ ] |
| 配置系统 | [ ] | ⭐⭐⭐⭐⭐ | [ ] |
| 训练流程 | [ ] | ⭐⭐⭐⭐⭐ | [ ] |
| 自动报告 | [ ] | ⭐⭐⭐⭐⭐ | [ ] |
| CLI 工具 | [ ] | ⭐⭐⭐⭐⭐ | [ ] |
| Web UI | [ ] | ⭐⭐⭐⭐⭐ | [ ] |
| 多视图支持 | [ ] | ⭐⭐⭐⭐⭐ | [ ] |
| 注意力监督 | [ ] | ⭐⭐⭐⭐⭐ | [ ] |

### 对比：MedFusion vs 从头写

| 维度 | MedFusion | 从头写 | 胜者 |
|------|-----------|--------|------|
| 启动速度 | _____ | _____ | [ ] MedFusion [ ] 从头写 |
| 代码量 | _____ 行 | _____ 行 | [ ] MedFusion [ ] 从头写 |
| 灵活性 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | [ ] MedFusion [ ] 从头写 |
| 报告质量 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | [ ] MedFusion [ ] 从头写 |
| 学习成本 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | [ ] MedFusion [ ] 从头写 |

---

## 🐛 问题记录

### 阻塞性问题（无法继续）

1. **问题描述**: _____
   - **出现阶段**: _____
   - **错误信息**: _____
   - **解决方案**: _____
   - **耗时**: _____ 分钟

### 体验问题（可以继续但不爽）

1. **问题描述**: _____
   - **影响**: _____
   - **建议改进**: _____

### 功能缺失

1. **缺少的功能**: _____
   - **为什么需要**: _____
   - **优先级**: [ ] 高 [ ] 中 [ ] 低

---

## 💡 功能使用情况

### 用到的功能（保留）

- [ ] 数据加载（CSV + 图片）
- [ ] 基础数据增强
- [ ] ResNet/EfficientNet/ViT backbone
- [ ] 简单 fusion（拼接/门控）
- [ ] 标准训练流程
- [ ] 混合精度训练
- [ ] 早停和检查点
- [ ] 基础评估指标
- [ ] 混淆矩阵
- [ ] ROC/PR 曲线
- [ ] 报告生成
- [ ] YAML 配置
- [ ] CLI 工具
- [ ] 其他: _____

### 没用到的功能（可能删除）

- [ ] Web UI
- [ ] 多视图支持
- [ ] 注意力监督
- [ ] 20+ 种 backbone
- [ ] 分布式训练
- [ ] 复杂缓存系统
- [ ] 性能基准测试
- [ ] 生存分析
- [ ] 特征提取器
- [ ] 其他: _____

---

## 🎯 最终结论

### 1. MedFusion 是否好用？

[ ] 非常好用，比从头写快很多
[ ] 还可以，有一些帮助
[ ] 一般，没有明显优势
[ ] 不好用，还不如从头写

**理由**: _____

### 2. 最有价值的功能是什么？

1. _____
2. _____
3. _____

### 3. 最没用的功能是什么？

1. _____
2. _____
3. _____

### 4. 如果重新设计，会保留什么？

**核心功能**:
- _____
- _____
- _____

**删除功能**:
- _____
- _____
- _____

### 5. 下一步建议

[ ] 继续完善当前版本
[ ] 大幅简化，创建 MedFusion Lite
[ ] 放弃框架，改用工具集
[ ] 其他: _____

---

## 📝 测试总结

**测试日期**: _____
**总耗时**: _____ 小时
**是否达到目标**: [ ] 是 [ ] 否

**核心发现**:
1. _____
2. _____
3. _____

**下一步行动**:
1. _____
2. _____
3. _____

---

**测试完成签名**: ___________
**日期**: ___________
