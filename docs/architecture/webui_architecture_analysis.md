# MedFusion Web UI æ¶æ„åˆ†ææŠ¥å‘Š

> æœ¬æ–‡æ¡£å…¨é¢åˆ†æ MedFusion Web UI çš„è®¾è®¡æ¶æ„ï¼Œå¹¶å¯¹æ¯”è¡Œä¸šæœ€ä½³å®è·µ

**åˆ†ææ—¥æœŸ**: 2026-02-20  
**ç‰ˆæœ¬**: 0.1.0  
**åˆ†æè€…**: AI Assistant

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

MedFusion Web UI æ˜¯ä¸€ä¸ª**æœ¬åœ°éƒ¨ç½²çš„åŒ»å­¦æ·±åº¦å­¦ä¹ è®­ç»ƒå¹³å°**ï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„å‰åç«¯åˆ†ç¦»æ¶æ„ã€‚æ•´ä½“è®¾è®¡**ç¬¦åˆè¡Œä¸šè§„èŒƒ**ï¼ŒæŠ€æœ¯æ ˆé€‰æ‹©åˆç†ï¼Œæ¶æ„æ¸…æ™°ï¼Œå…·å¤‡è‰¯å¥½çš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

**ç»¼åˆè¯„åˆ†**: â­â­â­â­â˜† (4.2/5)

**æ ¸å¿ƒä¼˜åŠ¿**:
- âœ… å‰åç«¯åˆ†ç¦»ï¼ŒèŒè´£æ¸…æ™°
- âœ… å®æ—¶é€šä¿¡æœºåˆ¶å®Œå–„ï¼ˆWebSocketï¼‰
- âœ… å·¥ä½œæµå¼•æ“è®¾è®¡ä¼˜ç§€ï¼ˆæ‹“æ‰‘æ’åºã€å¹¶è¡Œæ‰§è¡Œï¼‰
- âœ… ç±»å‹å®‰å…¨ï¼ˆTypeScript + Pydanticï¼‰
- âœ… å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆå®Œæ•´

**å¾…æ”¹è¿›é¡¹**:
- âš ï¸ æ•°æ®åº“é€‰å‹ï¼ˆSQLite â†’ PostgreSQLï¼‰
- âš ï¸ ç¼ºå°‘ API ç½‘å…³å’Œé™æµ
- âš ï¸ å‰ç«¯çŠ¶æ€ç®¡ç†å¯ä¼˜åŒ–
- âš ï¸ ç¼ºå°‘å®Œæ•´çš„ç›‘æ§å’Œæ—¥å¿—èšåˆ

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### æ¶æ„æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æµè§ˆå™¨                              â”‚
â”‚                    http://localhost:5173                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTP/WebSocket
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯å±‚ (Frontend)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  React 18 + TypeScript + Vite                        â”‚   â”‚
â”‚  â”‚  - Ant Design (UI ç»„ä»¶)                               â”‚   â”‚
â”‚  â”‚  - React Flow (å·¥ä½œæµç¼–è¾‘å™¨)                          â”‚   â”‚
â”‚  â”‚  - ECharts (æ•°æ®å¯è§†åŒ–)                               â”‚   â”‚
â”‚  â”‚  - Zustand (çŠ¶æ€ç®¡ç†)                                 â”‚   â”‚
â”‚  â”‚  - WebSocket Client (å®æ—¶é€šä¿¡)                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ REST API + WebSocket
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åç«¯å±‚ (Backend)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  FastAPI + Uvicorn                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ API è·¯ç”±   â”‚ å·¥ä½œæµå¼•æ“ â”‚ è®­ç»ƒæœåŠ¡   â”‚ è®¤è¯    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ (40 ç«¯ç‚¹)  â”‚ (æ‹“æ‰‘æ’åº) â”‚ (med_core) â”‚ (JWT)   â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ ORM
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®æŒä¹…å±‚ (Database)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  SQLAlchemy ORM + SQLite                             â”‚   â”‚
â”‚  â”‚  - workflows (å·¥ä½œæµå®šä¹‰)                             â”‚   â”‚
â”‚  â”‚  - workflow_executions (æ‰§è¡Œè®°å½•)                     â”‚   â”‚
â”‚  â”‚  - training_jobs (è®­ç»ƒä»»åŠ¡)                           â”‚   â”‚
â”‚  â”‚  - models (æ¨¡å‹åº“)                                    â”‚   â”‚
â”‚  â”‚  - datasets (æ•°æ®é›†)                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ ä»»åŠ¡é˜Ÿåˆ—
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¼‚æ­¥ä»»åŠ¡å±‚ (Task Queue)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Celery + Redis                                      â”‚   â”‚
â”‚  â”‚  - é•¿æ—¶é—´è¿è¡Œçš„è®­ç»ƒä»»åŠ¡                                â”‚   â”‚
â”‚  â”‚  - åå°æ•°æ®å¤„ç†                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ¶æ„ç±»å‹**: **å‰åç«¯åˆ†ç¦» + å•ä½“åç«¯**

è¿™æ˜¯æœ¬åœ°éƒ¨ç½² WebUI çš„**æ ‡å‡†æ¶æ„**ï¼Œç¬¦åˆè¡Œä¸šè§„èŒƒã€‚

---

## ğŸ”§ åç«¯æ¶æ„åˆ†æ

### 1. æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¡Œä¸šå¯¹æ¯” | è¯„åˆ† |
|------|---------|---------|------|
| Web æ¡†æ¶ | FastAPI | âœ… ç°ä»£ã€é«˜æ€§èƒ½ | â­â­â­â­â­ |
| ASGI æœåŠ¡å™¨ | Uvicorn | âœ… æ ‡å‡†é€‰æ‹© | â­â­â­â­â­ |
| ORM | SQLAlchemy 2.0 | âœ… æˆç†Ÿç¨³å®š | â­â­â­â­â­ |
| æ•°æ®åº“ | SQLite | âš ï¸ é€‚åˆå¼€å‘ï¼Œç”Ÿäº§éœ€å‡çº§ | â­â­â­â˜†â˜† |
| ä»»åŠ¡é˜Ÿåˆ— | Celery + Redis | âœ… è¡Œä¸šæ ‡å‡† | â­â­â­â­â­ |
| è®¤è¯ | JWT + bcrypt | âœ… å®‰å…¨å¯é  | â­â­â­â­â˜† |
| å®æ—¶é€šä¿¡ | WebSocket | âœ… å¿…å¤‡åŠŸèƒ½ | â­â­â­â­â­ |
| æ•°æ®éªŒè¯ | Pydantic | âœ… FastAPI æ ‡é… | â­â­â­â­â­ |

**æ€»ä½“è¯„ä»·**: æŠ€æœ¯æ ˆé€‰æ‹©**éå¸¸åˆç†**ï¼Œç¬¦åˆ Python Web å¼€å‘çš„æœ€ä½³å®è·µã€‚

### 2. ç›®å½•ç»“æ„

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/              # API è·¯ç”±å±‚ âœ…
â”‚   â”‚   â”œâ”€â”€ workflows.py
â”‚   â”‚   â”œâ”€â”€ training.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ datasets.py
â”‚   â”‚   â”œâ”€â”€ system.py
â”‚   â”‚   â””â”€â”€ auth.py
â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒåŠŸèƒ½å±‚ âœ…
â”‚   â”‚   â”œâ”€â”€ config.py     # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ database.py   # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”œâ”€â”€ auth.py       # è®¤è¯é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ logging.py    # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ workflow_engine.py  # å·¥ä½œæµå¼•æ“
â”‚   â”œâ”€â”€ crud/             # æ•°æ®è®¿é—®å±‚ âœ…
â”‚   â”‚   â”œâ”€â”€ workflows.py
â”‚   â”‚   â”œâ”€â”€ training.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â””â”€â”€ datasets.py
â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹å±‚ âœ…
â”‚   â”‚   â””â”€â”€ database.py
â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡é€»è¾‘å±‚ âœ…
â”‚   â”‚   â””â”€â”€ training_service.py
â”‚   â”œâ”€â”€ nodes/            # å·¥ä½œæµèŠ‚ç‚¹ âœ…
â”‚   â””â”€â”€ main.py           # åº”ç”¨å…¥å£ âœ…
â”œâ”€â”€ scripts/              # å·¥å…·è„šæœ¬ âœ…
â”œâ”€â”€ requirements.txt      # ä¾èµ–ç®¡ç† âœ…
â””â”€â”€ Dockerfile            # å®¹å™¨åŒ– âœ…
```

**è¯„ä»·**: é‡‡ç”¨**åˆ†å±‚æ¶æ„**ï¼ŒèŒè´£æ¸…æ™°ï¼Œç¬¦åˆ **Clean Architecture** åŸåˆ™ã€‚

### 3. API è®¾è®¡

#### 3.1 RESTful API

```python
# ç¬¦åˆ REST è§„èŒƒçš„ç«¯ç‚¹è®¾è®¡
GET    /api/v1/workflows          # åˆ—è¡¨
POST   /api/v1/workflows          # åˆ›å»º
GET    /api/v1/workflows/{id}     # è¯¦æƒ…
PUT    /api/v1/workflows/{id}     # æ›´æ–°
DELETE /api/v1/workflows/{id}     # åˆ é™¤

# å­èµ„æº
POST   /api/v1/workflows/{id}/execute  # æ‰§è¡Œå·¥ä½œæµ
GET    /api/v1/workflows/{id}/executions  # æ‰§è¡Œå†å²
```

**ä¼˜ç‚¹**:
- âœ… ä½¿ç”¨ API ç‰ˆæœ¬æ§åˆ¶ (`/api/v1/`)
- âœ… éµå¾ª RESTful å‘½åè§„èŒƒ
- âœ… ä½¿ç”¨æ­£ç¡®çš„ HTTP æ–¹æ³•
- âœ… èµ„æºåµŒå¥—åˆç†

**ç¬¦åˆåº¦**: â­â­â­â­â­

#### 3.2 WebSocket API

```python
# å®æ—¶é€šä¿¡ç«¯ç‚¹
WS /api/v1/training/ws/{job_id}

# æ¶ˆæ¯ç±»å‹
{
  "type": "status_update",      # çŠ¶æ€æ›´æ–°
  "type": "batch_progress",     # æ‰¹æ¬¡è¿›åº¦
  "type": "epoch_complete",     # Epoch å®Œæˆ
  "type": "training_complete",  # è®­ç»ƒå®Œæˆ
  "type": "error",              # é”™è¯¯
  "type": "heartbeat"           # å¿ƒè·³
}
```

**ä¼˜ç‚¹**:
- âœ… æ¶ˆæ¯ç±»å‹æ˜ç¡®
- âœ… æ”¯æŒå¿ƒè·³ä¿æ´»
- âœ… åŒå‘é€šä¿¡ï¼ˆæ§åˆ¶å‘½ä»¤ï¼‰

**ç¬¦åˆåº¦**: â­â­â­â­â­

### 4. å·¥ä½œæµå¼•æ“

è¿™æ˜¯æ•´ä¸ªåç«¯çš„**æ ¸å¿ƒäº®ç‚¹**ã€‚

```python
class WorkflowEngine:
    """å·¥ä½œæµæ‰§è¡Œå¼•æ“"""
    
    def _topological_sort(self) -> List[List[str]]:
        """æ‹“æ‰‘æ’åºï¼Œè¿”å›å¯å¹¶è¡Œæ‰§è¡Œçš„èŠ‚ç‚¹åˆ†å±‚"""
        # ä½¿ç”¨ Kahn ç®—æ³•
        # åŒå±‚èŠ‚ç‚¹å¯å¹¶è¡Œæ‰§è¡Œ
        
    async def execute(self, progress_callback):
        """æ‰§è¡Œå·¥ä½œæµ"""
        layers = self._topological_sort()
        
        for layer in layers:
            # å¹¶è¡Œæ‰§è¡ŒåŒå±‚èŠ‚ç‚¹
            tasks = [self._execute_node(node_id) for node_id in layer]
            results = await asyncio.gather(*tasks, return_exceptions=True)
            
            # é”™è¯¯å¤„ç†å’Œä¾èµ–è·³è¿‡
            if any(isinstance(r, Exception) for r in results):
                self._mark_dependent_nodes_skipped(failed_node_id)
```

**è®¾è®¡äº®ç‚¹**:
- âœ… **æ‹“æ‰‘æ’åº**: è‡ªåŠ¨è§£æä¾èµ–å…³ç³»
- âœ… **å¹¶è¡Œæ‰§è¡Œ**: åŒå±‚èŠ‚ç‚¹å¹¶è¡Œï¼Œæé«˜æ•ˆç‡
- âœ… **é”™è¯¯ä¼ æ’­**: å¤±è´¥èŠ‚ç‚¹è‡ªåŠ¨è·³è¿‡ä¸‹æ¸¸
- âœ… **è¿›åº¦å›è°ƒ**: å®æ—¶æ¨é€æ‰§è¡ŒçŠ¶æ€
- âœ… **å¼‚æ­¥æ‰§è¡Œ**: ä½¿ç”¨ asyncioï¼Œä¸é˜»å¡

**å¯¹æ¯”è¡Œä¸šæ–¹æ¡ˆ**:
- Apache Airflow: æ›´å¤æ‚ï¼Œé€‚åˆå¤§è§„æ¨¡ ETL
- Prefect: ç±»ä¼¼è®¾è®¡ï¼Œä½†æ›´é‡é‡çº§
- **MedFusion**: è½»é‡çº§ï¼Œä¸“æ³¨äºæ·±åº¦å­¦ä¹ å·¥ä½œæµ

**è¯„ä»·**: è®¾è®¡**éå¸¸ä¼˜ç§€**ï¼Œè¾¾åˆ°**ç”Ÿäº§çº§åˆ«**ã€‚â­â­â­â­â­

### 5. æ•°æ®åº“è®¾è®¡

#### 5.1 è¡¨ç»“æ„

```sql
-- å·¥ä½œæµè¡¨
workflows (
    id, name, description,
    nodes JSON,           -- èŠ‚ç‚¹å®šä¹‰
    edges JSON,           -- è¿æ¥å…³ç³»
    created_at, updated_at,
    execution_count       -- ç»Ÿè®¡ä¿¡æ¯
)

-- æ‰§è¡Œè®°å½•è¡¨
workflow_executions (
    id, workflow_id,
    status, result JSON, error,
    started_at, completed_at, duration
)

-- è®­ç»ƒä»»åŠ¡è¡¨
training_jobs (
    id, job_id, name,
    model_config JSON,    -- çµæ´»é…ç½®
    current_metrics JSON, -- å®æ—¶æŒ‡æ ‡
    history JSON,         -- å†å²è®°å½•
    status, progress
)

-- æ¨¡å‹è¡¨
models (
    id, name, backbone, format,
    file_path, file_size,
    num_parameters, accuracy
)

-- æ•°æ®é›†è¡¨
datasets (
    id, name, type, path,
    num_samples, num_classes,
    statistics JSON
)
```

**è®¾è®¡è¯„ä»·**:
- âœ… ä½¿ç”¨ JSON å­—æ®µå­˜å‚¨çµæ´»æ•°æ®ï¼ˆé…ç½®ã€æŒ‡æ ‡ã€å†å²ï¼‰
- âœ… å¤–é”®å…³ç³»æ¸…æ™°ï¼ˆworkflow â†’ executionsï¼‰
- âœ… ç´¢å¼•ä¼˜åŒ–ï¼ˆstatus, job_id, created_atï¼‰
- âœ… æ—¶é—´æˆ³è®°å½•å®Œæ•´
- âš ï¸ SQLite é™åˆ¶ï¼ˆå¹¶å‘å†™å…¥ã€æ€§èƒ½ï¼‰

**ç¬¦åˆåº¦**: â­â­â­â­â˜†

#### 5.2 æ•°æ®åº“é€‰å‹é—®é¢˜

**å½“å‰**: SQLite
- âœ… é›¶é…ç½®ï¼Œé€‚åˆå¼€å‘å’Œæ¼”ç¤º
- âœ… å•æ–‡ä»¶ï¼Œæ˜“äºå¤‡ä»½
- âŒ å¹¶å‘å†™å…¥æ€§èƒ½å·®
- âŒ ä¸æ”¯æŒå¤šæœåŠ¡å™¨éƒ¨ç½²
- âŒ ç¼ºå°‘é«˜çº§åŠŸèƒ½ï¼ˆå…¨æ–‡æœç´¢ã€åˆ†åŒºï¼‰

**å»ºè®®**: PostgreSQL
- âœ… ç”Ÿäº§çº§æ€§èƒ½
- âœ… æ”¯æŒå¹¶å‘
- âœ… ä¸°å¯Œçš„æ•°æ®ç±»å‹ï¼ˆJSONBï¼‰
- âœ… å…¨æ–‡æœç´¢ã€åˆ†åŒºã€å¤åˆ¶

**ç»“è®º**: å¼€å‘ç¯å¢ƒ OKï¼Œç”Ÿäº§ç¯å¢ƒ**å¿…é¡»å‡çº§**ã€‚

### 6. è®¤è¯å’Œå®‰å…¨

```python
# JWT è®¤è¯
def create_access_token(data: dict) -> str:
    to_encode = data.copy()
    expire = datetime.utcnow() + timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)
    to_encode.update({"exp": expire})
    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)

# å¯†ç åŠ å¯†ï¼ˆbcryptï¼‰
def get_password_hash(password: str) -> str:
    password_bytes = password.encode('utf-8')
    if len(password_bytes) > 72:
        password_bytes = password_bytes[:72]  # bcrypt é™åˆ¶
    salt = bcrypt.gensalt(rounds=12)
    return bcrypt.hashpw(password_bytes, salt).decode('utf-8')
```

**å®‰å…¨æªæ–½**:
- âœ… JWT ä»¤ç‰Œè®¤è¯
- âœ… bcrypt å¯†ç åŠ å¯†ï¼ˆ12 è½®ï¼‰
- âœ… CORS é…ç½®
- âœ… å¯†ç é•¿åº¦é™åˆ¶å¤„ç†
- âš ï¸ ç¼ºå°‘ HTTPS å¼ºåˆ¶
- âš ï¸ ç¼ºå°‘ API é™æµ
- âš ï¸ ç¼ºå°‘ CSRF ä¿æŠ¤

**ç¬¦åˆåº¦**: â­â­â­â­â˜†

### 7. ä¸­é—´ä»¶å’Œä¼˜åŒ–

```python
# GZip å‹ç¼©
app.add_middleware(GZipMiddleware, minimum_size=1000)

# CORS
app.add_middleware(
    CORSMiddleware,
    allow_origins=settings.CORS_ORIGINS,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# å…¨å±€å¼‚å¸¸å¤„ç†
@app.exception_handler(Exception)
async def global_exception_handler(request, exc):
    logger.error(f"Unhandled exception: {exc}")
    return JSONResponse(...)

# å¥åº·æ£€æŸ¥
@app.get("/health/live")   # å­˜æ´»æ£€æŸ¥
@app.get("/health/ready")  # å°±ç»ªæ£€æŸ¥
```

**ä¼˜ç‚¹**:
- âœ… GZip å‹ç¼©å‡å°‘ä¼ è¾“
- âœ… CORS é…ç½®æ­£ç¡®
- âœ… å…¨å±€å¼‚å¸¸å¤„ç†
- âœ… å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼ˆK8s å‹å¥½ï¼‰
- âš ï¸ ç¼ºå°‘è¯·æ±‚æ—¥å¿—ä¸­é—´ä»¶
- âš ï¸ ç¼ºå°‘é™æµä¸­é—´ä»¶

**ç¬¦åˆåº¦**: â­â­â­â­â˜†

---

## ğŸ¨ å‰ç«¯æ¶æ„åˆ†æ

### 1. æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¡Œä¸šå¯¹æ¯” | è¯„åˆ† |
|------|---------|---------|------|
| æ¡†æ¶ | React 18 | âœ… ä¸»æµé€‰æ‹© | â­â­â­â­â­ |
| è¯­è¨€ | TypeScript | âœ… ç±»å‹å®‰å…¨ | â­â­â­â­â­ |
| æ„å»ºå·¥å…· | Vite | âœ… å¿«é€Ÿã€ç°ä»£ | â­â­â­â­â­ |
| UI ç»„ä»¶ | Ant Design 5 | âœ… ä¼ä¸šçº§ | â­â­â­â­â­ |
| å·¥ä½œæµç¼–è¾‘ | React Flow 11 | âœ… ä¸“ä¸šå·¥å…· | â­â­â­â­â­ |
| å›¾è¡¨ | ECharts 5 | âœ… åŠŸèƒ½å¼ºå¤§ | â­â­â­â­â­ |
| çŠ¶æ€ç®¡ç† | Zustand | âš ï¸ è½»é‡ä½†åŠŸèƒ½æœ‰é™ | â­â­â­â˜†â˜† |
| è·¯ç”± | React Router 6 | âœ… æ ‡å‡†é€‰æ‹© | â­â­â­â­â­ |

**æ€»ä½“è¯„ä»·**: æŠ€æœ¯æ ˆ**éå¸¸ç°ä»£**ï¼Œé€‰æ‹©åˆç†ã€‚

### 2. ç›®å½•ç»“æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/              # API å®¢æˆ·ç«¯ âœ…
â”‚   â”‚   â”œâ”€â”€ workflows.ts
â”‚   â”‚   â”œâ”€â”€ training.ts
â”‚   â”‚   â”œâ”€â”€ models.ts
â”‚   â”‚   â””â”€â”€ datasets.ts
â”‚   â”œâ”€â”€ components/       # ç»„ä»¶åº“ âœ…
â”‚   â”‚   â”œâ”€â”€ nodes/        # å·¥ä½œæµèŠ‚ç‚¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ NodePalette.tsx
â”‚   â”‚   â”œâ”€â”€ NodeConfigPanel.tsx
â”‚   â”‚   â””â”€â”€ ErrorBoundary.tsx
â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶ âœ…
â”‚   â”‚   â”œâ”€â”€ WorkflowEditor.tsx
â”‚   â”‚   â”œâ”€â”€ TrainingMonitor.tsx
â”‚   â”‚   â”œâ”€â”€ ModelLibrary.tsx
â”‚   â”‚   â””â”€â”€ SystemMonitor.tsx
â”‚   â”œâ”€â”€ stores/           # çŠ¶æ€ç®¡ç† âœ…
â”‚   â”œâ”€â”€ types/            # TypeScript ç±»å‹ âœ…
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•° âœ…
â”‚   â”‚   â”œâ”€â”€ websocket.ts
â”‚   â”‚   â””â”€â”€ apiClient.ts
â”‚   â”œâ”€â”€ App.tsx           # åº”ç”¨å…¥å£ âœ…
â”‚   â””â”€â”€ main.tsx          # æ¸²æŸ“å…¥å£ âœ…
â”œâ”€â”€ package.json          # ä¾èµ–ç®¡ç† âœ…
â”œâ”€â”€ tsconfig.json         # TS é…ç½® âœ…
â”œâ”€â”€ vite.config.ts        # Vite é…ç½® âœ…
â””â”€â”€ Dockerfile            # å®¹å™¨åŒ– âœ…
```

**è¯„ä»·**: ç»“æ„æ¸…æ™°ï¼Œç¬¦åˆ React é¡¹ç›®**æœ€ä½³å®è·µ**ã€‚

### 3. ç»„ä»¶è®¾è®¡

#### 3.1 å·¥ä½œæµç¼–è¾‘å™¨

```typescript
// ä½¿ç”¨ React Flow å®ç°æ‹–æ‹½å¼ç¼–è¾‘å™¨
const WorkflowEditor = () => {
  const [nodes, setNodes] = useState<Node[]>([])
  const [edges, setEdges] = useState<Edge[]>([])
  
  // è‡ªå®šä¹‰èŠ‚ç‚¹ç±»å‹
  const nodeTypes = {
    dataLoader: DataLoaderNode,
    model: ModelNode,
    training: TrainingNode,
    evaluation: EvaluationNode,
  }
  
  return (
    <ReactFlow
      nodes={nodes}
      edges={edges}
      nodeTypes={nodeTypes}
      onNodesChange={onNodesChange}
      onEdgesChange={onEdgesChange}
      onConnect={onConnect}
    />
  )
}
```

**è®¾è®¡äº®ç‚¹**:
- âœ… è‡ªå®šä¹‰èŠ‚ç‚¹ç»„ä»¶
- âœ… æ‹–æ‹½å¼äº¤äº’
- âœ… é…ç½®é¢æ¿ï¼ˆDrawerï¼‰
- âœ… èŠ‚ç‚¹å·¥å…·æ ï¼ˆPaletteï¼‰
- âœ… å®æ—¶éªŒè¯

**å¯¹æ¯”è¡Œä¸šæ–¹æ¡ˆ**:
- ComfyUI: ç±»ä¼¼è®¾è®¡ï¼Œä½†æ›´å¤æ‚
- n8n: å·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°
- **MedFusion**: ä¸“æ³¨äºæ·±åº¦å­¦ä¹ ï¼Œæ›´ç®€æ´

**è¯„ä»·**: è®¾è®¡**ä¼˜ç§€**ï¼Œç”¨æˆ·ä½“éªŒå¥½ã€‚â­â­â­â­â­

#### 3.2 è®­ç»ƒç›‘æ§

```typescript
const TrainingMonitor = () => {
  const [jobs, setJobs] = useState<TrainingJob[]>([])
  const wsRef = useRef<WebSocketClient | null>(null)
  
  useEffect(() => {
    // å»ºç«‹ WebSocket è¿æ¥
    const ws = new WebSocketClient({
      url: `ws://localhost:8000/api/v1/training/ws/${jobId}`,
      onMessage: (data) => {
        // å®æ—¶æ›´æ–°çŠ¶æ€
        if (data.type === 'status_update') {
          updateJobStatus(data)
        }
      }
    })
    ws.connect()
    
    return () => ws.close()
  }, [jobId])
  
  return (
    <div>
      <TaskList jobs={jobs} />
      <RealtimeChart data={metrics} />
      <ControlPanel onPause={...} onStop={...} />
    </div>
  )
}
```

**è®¾è®¡äº®ç‚¹**:
- âœ… WebSocket å®æ—¶æ›´æ–°
- âœ… è‡ªåŠ¨é‡è¿æœºåˆ¶
- âœ… è®­ç»ƒæ§åˆ¶ï¼ˆæš‚åœ/ç»§ç»­/åœæ­¢ï¼‰
- âœ… ECharts å›¾è¡¨å±•ç¤º
- âœ… ä»»åŠ¡åˆ—è¡¨ç®¡ç†

**è¯„ä»·**: åŠŸèƒ½**å®Œæ•´**ï¼Œå®æ—¶æ€§å¥½ã€‚â­â­â­â­â­

### 4. WebSocket å®¢æˆ·ç«¯

```typescript
class WebSocketClient {
  private reconnectAttempts = 0
  private maxReconnectAttempts = 5
  private heartbeatInterval = 30000
  
  connect(): void {
    this.ws = new WebSocket(this.url)
    this.ws.onopen = () => {
      this.reconnectAttempts = 0
      this.startHeartbeat()
    }
    this.ws.onclose = () => {
      if (!this.isManualClose) {
        this.reconnect()  // è‡ªåŠ¨é‡è¿
      }
    }
  }
  
  private reconnect(): void {
    const delay = this.reconnectInterval * Math.pow(1.5, this.reconnectAttempts - 1)
    setTimeout(() => this.connect(), delay)  // æŒ‡æ•°é€€é¿
  }
}
```

**è®¾è®¡äº®ç‚¹**:
- âœ… è‡ªåŠ¨é‡è¿ï¼ˆæŒ‡æ•°é€€é¿ï¼‰
- âœ… å¿ƒè·³ä¿æ´»
- âœ… é”™è¯¯å¤„ç†
- âœ… æ‰‹åŠ¨å…³é—­æ£€æµ‹
- âœ… è¿æ¥çŠ¶æ€ç®¡ç†

**è¯„ä»·**: å®ç°**éå¸¸ä¸“ä¸š**ï¼Œè¾¾åˆ°ç”Ÿäº§çº§åˆ«ã€‚â­â­â­â­â­

### 5. çŠ¶æ€ç®¡ç†

**å½“å‰æ–¹æ¡ˆ**: Zustand

```typescript
// è½»é‡çº§çŠ¶æ€ç®¡ç†
const useWorkflowStore = create((set) => ({
  nodes: [],
  edges: [],
  addNode: (node) => set((state) => ({ nodes: [...state.nodes, node] })),
  updateNode: (id, data) => set((state) => ({
    nodes: state.nodes.map(n => n.id === id ? { ...n, data } : n)
  })),
}))
```

**ä¼˜ç‚¹**:
- âœ… è½»é‡çº§ï¼ˆ<1KBï¼‰
- âœ… API ç®€å•
- âœ… TypeScript æ”¯æŒ

**ç¼ºç‚¹**:
- âš ï¸ ç¼ºå°‘ä¸­é—´ä»¶ç”Ÿæ€
- âš ï¸ ç¼ºå°‘æ—¶é—´æ—…è¡Œè°ƒè¯•
- âš ï¸ å¤æ‚çŠ¶æ€ç®¡ç†èƒ½åŠ›æœ‰é™

**å»ºè®®**: å¯¹äºå½“å‰è§„æ¨¡ OKï¼Œæœªæ¥å¯è€ƒè™‘ Redux Toolkit æˆ– Jotaiã€‚

**ç¬¦åˆåº¦**: â­â­â­â˜†â˜†

### 6. ç±»å‹å®‰å…¨

```typescript
// å®Œæ•´çš„ç±»å‹å®šä¹‰
interface TrainingJob {
  id: string
  name: string
  status: 'running' | 'paused' | 'completed' | 'failed'
  progress: number
  epoch: number
  totalEpochs: number
  metrics: {
    loss: number
    accuracy: number
    val_loss: number
    val_accuracy: number
  }
}

// API å®¢æˆ·ç«¯ç±»å‹
export const getTrainingJobs = async (): Promise<TrainingJob[]> => {
  const response = await apiClient.get<TrainingJob[]>('/api/v1/training/jobs')
  return response.data
}
```

**ä¼˜ç‚¹**:
- âœ… å®Œæ•´çš„ç±»å‹å®šä¹‰
- âœ… API å“åº”ç±»å‹åŒ–
- âœ… ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
- âœ… IDE è‡ªåŠ¨è¡¥å…¨

**è¯„ä»·**: TypeScript ä½¿ç”¨**éå¸¸è§„èŒƒ**ã€‚â­â­â­â­â­

---

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆåˆ†æ

### 1. Docker å®¹å™¨åŒ–

```yaml
# docker-compose.yml
services:
  backend:
    build: ./backend
    ports: ["8000:8000"]
    volumes:
      - ./data:/app/data
      - ./models:/app/models
    depends_on: [redis]
    
  frontend:
    build: ./frontend
    ports: ["80:80"]
    depends_on: [backend]
    
  redis:
    image: redis:7-alpine
    ports: ["6379:6379"]
```

**ä¼˜ç‚¹**:
- âœ… å®Œæ•´çš„å®¹å™¨åŒ–æ–¹æ¡ˆ
- âœ… æœåŠ¡ä¾èµ–ç®¡ç†
- âœ… æ•°æ®å·æŒä¹…åŒ–
- âœ… ç½‘ç»œéš”ç¦»
- âœ… ä¸€é”®å¯åŠ¨

**ç¬¦åˆåº¦**: â­â­â­â­â­

### 2. ä¸€é”®å¯åŠ¨è„šæœ¬

```bash
#!/bin/bash
# start-webui