# MedFusion Web UI 快速启动指南

## 🚀 快速开始

### 前置要求
- Node.js 18+ 
- Python 3.11+
- npm 或 yarn

### 1. 启动后端服务

```bash
cd medfusion-web/backend

# 安装依赖
pip install -r requirements.txt

# 初始化数据库
python scripts/init_db.py

# 启动 FastAPI 服务
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

后端服务将运行在: http://localhost:8000

### 2. 启动前端服务

```bash
cd medfusion-web/frontend

# 安装依赖（首次运行）
npm install

# 启动开发服务器
npm run dev
```

前端服务将运行在: http://localhost:3000

### 3. 访问应用

打开浏览器访问: http://localhost:3000

## 📱 功能演示

### 工作流编辑器

1. **创建工作流**
   - 点击左侧节点库中的"数据加载器"
   - 点击"模型"节点
   - 点击"训练"节点
   - 点击"评估"节点

2. **连接节点**
   - 从数据加载器的右侧连接点拖拽到模型的左侧连接点
   - 从模型拖拽到训练
   - 从训练拖拽到评估

3. **配置节点**
   - 双击"数据加载器"节点
   - 设置数据路径: `/data/lung_cancer`
   - 设置批次大小: `32`
   - 点击"保存"

   - 双击"模型"节点
   - 选择 Backbone: `resnet50`
   - 设置类别数: `3`
   - 启用预训练: `是`
   - 点击"保存"

   - 双击"训练"节点
   - 设置训练轮数: `50`
   - 设置学习率: `0.001`
   - 选择优化器: `Adam`
   - 启用混合精度: `是`
   - 点击"保存"

4. **保存和执行**
   - 点击右上角"保存"按钮
   - 输入工作流名称: `肺癌分类训练`
   - 点击"执行"按钮

### 训练监控

1. **查看任务列表**
   - 点击左侧导航栏"训练监控"
   - 默认显示"任务列表"标签
   - 查看所有训练任务的状态

2. **实时监控**
   - 点击任务的"查看详情"按钮
   - 切换到"实时监控"标签
   - 查看训练进度、指标和图表

3. **控制训练**
   - 点击"暂停"按钮暂停训练
   - 点击"继续"按钮恢复训练
   - 点击"停止"按钮终止训练

### 模型库

1. **浏览模型**
   - 点击左侧导航栏"模型库"
   - 查看所有已保存的模型

2. **搜索模型**
   - 在搜索框输入关键词
   - 使用 Backbone 下拉框筛选
   - 使用格式下拉框筛选

3. **查看详情**
   - 点击模型的"详情"按钮
   - 查看完整的模型信息

4. **下载模型**
   - 点击"下载"按钮
   - 模型文件将开始下载

## 🎨 界面预览

### 工作流编辑器
```
┌─────────────────────────────────────────────────────────┐
│  节点库                                    保存  执行    │
│  ┌──────────┐                                           │
│  │ 数据加载器│                                           │
│  │ 模型     │         ┌──────────┐                      │
│  │ 训练     │         │数据加载器 │                      │
│  │ 评估     │         └─────┬────┘                      │
│  └──────────┘               │                           │
│                         ┌───▼────┐                      │
│                         │  模型   │                      │
│                         └───┬────┘                      │
│                             │                           │
│                         ┌───▼────┐                      │
│                         │  训练   │                      │
│                         └───┬────┘                      │
│                             │                           │
│                         ┌───▼────┐                      │
│                         │  评估   │                      │
│                         └────────┘                      │
└─────────────────────────────────────────────────────────┘
```

### 训练监控
```
┌─────────────────────────────────────────────────────────┐
│  训练监控                                      刷新      │
│  ┌─────────────┬──────────────┐                        │
│  │ 任务列表    │ 实时监控      │                        │
│  └─────────────┴──────────────┘                        │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 肺癌分类训练                                     │   │
│  │ ████████████████░░░░░░░░░░░░ 45%                │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐              │
│  │Epoch │  │ 损失  │  │准确率 │  │学习率 │              │
│  │23/50 │  │0.3245│  │89.23%│  │0.0001│              │
│  └──────┘  └──────┘  └──────┘  └──────┘              │
│                                                         │
│  ┌──────────────┐  ┌──────────────┐                   │
│  │  损失曲线     │  │  准确率曲线    │                   │
│  │              │  │              │                   │
│  │   📈         │  │   📈         │                   │
│  └──────────────┘  └──────────────┘                   │
└─────────────────────────────────────────────────────────┘
```

### 模型库
```
┌─────────────────────────────────────────────────────────┐
│  模型库                                      上传模型    │
│                                                         │
│  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐              │
│  │模型数 │  │参数量 │  │存储量 │  │准确率 │              │
│  │  3   │  │121.2M│  │484.8M│  │91.97%│              │
│  └──────┘  └──────┘  └──────┘  └──────┘              │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 🔍 搜索  [Backbone▼]  [格式▼]                   │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 肺癌分类模型 v1.0  [resnet50] [25.6M] [92.34%]  │   │
│  │ 基于 ResNet50 的肺癌三分类模型                   │   │
│  │                          [详情] [下载] [删除]    │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 多视图融合模型 v2.1  [efficientnet_b2] [9.2M]   │   │
│  │ 使用注意力融合的多视图模型                       │   │
│  │                          [详情] [下载] [删除]    │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

## 🔧 开发模式

### 热重载
前端和后端都支持热重载，修改代码后自动刷新。

### 调试
- 前端: 使用浏览器开发者工具
- 后端: 查看终端日志

### API 文档
访问 http://localhost:8000/docs 查看 FastAPI 自动生成的 API 文档。

## 📝 常见问题

### Q: 前端无法连接后端？
A: 检查后端是否在 8000 端口运行，查看 `vite.config.ts` 中的代理配置。

### Q: 节点无法连接？
A: 确保连接方向正确（从 source 到 target），检查节点类型是否支持连接。

### Q: 训练任务不显示？
A: 当前使用模拟数据，需要集成后端 API 后才能显示真实数据。

### Q: 模型下载失败？
A: 下载功能待实现，当前只显示提示消息。

## 🎯 下一步

1. **集成后端 API**: 连接真实的后端服务
2. **实现 WebSocket**: 添加实时更新功能
3. **完善功能**: 添加数据集管理、系统监控等
4. **优化性能**: 虚拟滚动、懒加载等

## 📚 更多文档

- [前端增强报告](FRONTEND_ENHANCEMENT.md)
- [前端实现总结](FRONTEND_SUMMARY.md)
- [数据库集成报告](DATABASE_INTEGRATION.md)
- [后端完成报告](docs/architecture/web_ui_backend_completion_report.md)

---

**祝你使用愉快！** 🎉
